---
interface Props {
  title?: string;
  description?: string;
  image?: string;
  ogImage?: string;
  type?: string;
  url?: string;
  schema?: object;
}

import siteContent from '../data/siteContent.json';
import { pwaInfo } from 'virtual:pwa-info';
const services = siteContent.services;

const {
  title = "Kalidass Travels - Premium Travel Experience",
  description = "Premium travel and cab services across South India. Professional drivers, comfortable vehicles, affordable rates.",
  image = "/images/logo.png",
  ogImage,
  type = "website",
  url = Astro.url.href,
  schema,
} = Astro.props;

const siteUrl = "https://kalidasstravels.in";
const fullImage = ogImage
  ? ogImage.startsWith("http")
    ? ogImage
    : `${siteUrl}${ogImage}`
  : image.startsWith("http")
    ? image
    : `${siteUrl}${image}`;

const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "TaxiService",
  "name": "Kalidass Travels",
  "image": "https://kalidasstravels.in/images/logo.png",
  "description": description,
  "telephone": "+919952749408",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Chennai",
    "addressRegion": "Tamil Nadu",
    "addressCountry": "IN"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "13.0827",
    "longitude": "80.2707"
  },
  "areaServed": {
    "@type": "City",
    "name": "Chennai"
  },
  "priceRange": "‚Çπ‚Çπ",
  "openingHoursSpecification": {
    "@type": "OpeningHoursSpecification",
    "dayOfWeek": [
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
      "Sunday"
    ],
    "opens": "00:00",
    "closes": "23:59"
  }
};
---

<!doctype html>
<html lang="en">
  <head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N4N0V5224H"
    ></script>
    <script is:inline>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-N4N0V5224H");
    </script>
    <script is:inline>
      function initGoogleMaps() {
        window.dispatchEvent(new CustomEvent('google-maps-loaded'));
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBPpRgTPIkv20IMdaBqqdlz0S0FEGU5400&libraries=places&callback=initGoogleMaps" defer></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#4f46e5" />
    <link rel="icon" type="image/png" href="/images/favicon.png" />
    <meta name="description" content={description} />
    <link rel="canonical" href={url} />
    <link rel="manifest" href="/manifest.json" />
    <script src="/src/pwa.ts"></script>
    { pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} /> }

    <!-- Fonts: Noto Sans (English), Hind Madurai (Tamil Body), Mukta Malar (Tamil Headings) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;500;600;700;800&family=Hind+Madurai:wght@300;400;500;600;700&family=Mukta+Malar:wght@200;300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <title>{title}</title>

    <!-- Open Graph / Facebook / WhatsApp -->
    <meta property="og:type" content={type} />
    <meta property="og:url" content={url} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullImage} />
    <meta property="og:image:type" content="image/jpeg" />
    {ogImage && <meta property="og:image:width" content="1200" />}
    {ogImage && <meta property="og:image:height" content="630" />}
    <meta property="og:site_name" content="Kalidass Travels" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={url} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={fullImage} />

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json" set:html={JSON.stringify(schema || localBusinessSchema)} />


    <style is:global>
      html {
        font-family: 'Noto Sans', sans-serif;
        scroll-behavior: smooth;
      }

      /* Language Toggle Styles */
      body.lang-ta .lang-en { display: none !important; }
      body:not(.lang-ta) .lang-ta { display: none !important; }

      /* Tamil Font Overrides */
      body.lang-ta,
      body.lang-ta .font-sans {
        font-family: 'Hind Madurai', sans-serif !important;
      }
      
      body.lang-ta h1, 
      body.lang-ta h2, 
      body.lang-ta h3, 
      body.lang-ta h4, 
      body.lang-ta h5, 
      body.lang-ta h6,
      body.lang-ta .font-heading {
        font-family: 'Mukta Malar', sans-serif !important;
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style is:inline>
      /* Color Theme Swatches in Hex */
      .color-theme_logo-1-hex {
        color: #f22222;
      }
      .color-theme_logo-2-hex {
        color: #f24141;
      }
      .color-theme_logo-3-hex {
        color: #f27777;
      }
      .color-theme_logo-4-hex {
        color: #f2f2f2;
      }
      .color-theme_logo-5-hex {
        color: #0d0d0d;
      }

      /* Color Theme Swatches in RGBA */
      .color-theme_logo-1-rgba {
        color: rgba(242, 34, 34, 1);
      }
      .color-theme_logo-2-rgba {
        color: rgba(242, 65, 65, 1);
      }
      .color-theme_logo-3-rgba {
        color: rgba(242, 119, 119, 1);
      }
      .color-theme_logo-4-rgba {
        color: rgba(242, 242, 242, 1);
      }
      .color-theme_logo-5-rgba {
        color: rgba(13, 13, 13, 1);
      }

      /* Color Theme Swatches in HSLA */
      .color-theme_logo-1-hsla {
        color: hsla(0, 88, 54, 1);
      }
      .color-theme_logo-2-hsla {
        color: hsla(0, 87, 60, 1);
      }
      .color-theme_logo-3-hsla {
        color: hsla(0, 82, 70, 1);
      }
      .color-theme_logo-4-hsla {
        color: hsla(0, 0, 94, 1);
      }
      .color-theme_logo-5-hsla {
        color: hsla(0, 0, 5, 1);
      }

      :root {
        --theme-red: #f22222;
        --theme-red-bright: #f24141;
        --theme-rose: #f27777;
        --theme-cream: #f2f2f2;
        --theme-dark: #0d0d0d;
      }

      body {
        background-color: var(--theme-cream);
        color: var(--theme-dark);
      }

      nav {
        background: transparent;
        border-bottom: 1px solid rgba(13, 13, 13, 0.1);
      }

      nav a.header-link {
        color: var(--theme-dark);
        font-weight: 500;
        transition: color 0.2s ease;
      }

      nav a.header-link:hover {
        color: var(--theme-red);
      }

      .primary-cta {
        background: linear-gradient(
          135deg,
          var(--theme-red),
          var(--theme-red-bright)
        );
        color: #fff;
        font-weight: 600;
        border-radius: 999px;
        padding: 0.75rem 1.5rem;
        box-shadow: 0 10px 25px rgba(242, 34, 34, 0.35);
      }

      .primary-cta:hover {
        transform: translateY(-1px);
        box-shadow: 0 12px 28px rgba(242, 65, 65, 0.45);
      }

      footer {
        background: var(--theme-dark);
        color: var(--theme-cream);
      }

      footer a:hover {
        color: var(--theme-red);
      }

      #mobile-menu {
        background: rgba(242, 242, 242, 0.9);
      }
    </style>
  </head>
  <body class="font-sans antialiased">
    <!-- Seasonal Offer Ticker (Dismissible) -->
    <div
      id="seasonal-offer"
      class="bg-gradient-to-r from-orange-400 to-red-500 text-white text-sm py-2 px-4 relative z-50 hidden"
    >
      <div class="max-w-7xl mx-auto flex justify-between items-center">
        <div class="flex-1 text-center font-medium">
          <span class="animate-pulse mr-2">üïâÔ∏è</span>
          <span class="hidden md:inline"
            >Sabarimala Season 2025-26 Started!
          </span>
          Book your Mandala Pooja Trip now.
          <a
            href="/services/sabarimala-trip"
            class="underline ml-2 font-bold hover:text-yellow-200"
            >View Package &rarr;</a
          >
        </div>
        <button
          id="close-offer"
          class="ml-4 text-white/80 hover:text-white focus:outline-none"
          aria-label="Close offer"
        >
          <svg
            class="w-4 h-4"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            ><path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"></path></svg
          >
        </button>
      </div>
    </div>
    <script is:inline>
      // Show offer only if not dismissed previously AND not on corporate page
      const isCorporatePage = window.location.pathname.includes(
        "/services/category/corporate",
      );
      if (!sessionStorage.getItem("offerDismissed") && !isCorporatePage) {
        const offer = document.getElementById("seasonal-offer");
        if (offer) offer.classList.remove("hidden");
      }
      document.getElementById("close-offer")?.addEventListener("click", () => {
        document.getElementById("seasonal-offer").style.display = "none";
        sessionStorage.setItem("offerDismissed", "true");
      });
    </script>

    <!-- Navbar -->
    <nav class="sticky top-0 z-40 shadow-md bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <!-- Logo -->
          <div class="flex-shrink-0 flex items-center gap-3">
            <a href="/" aria-label="Kalidass Travels home">
              <img
                src="/images/logo.png"
                alt="Kalidass Travels logo"
                class="h-12 w-auto object-contain"
              />
            </a>
          </div>

          <!-- Desktop Menu -->
          <div class="hidden md:flex items-center space-x-8">
            <a href="/" class="header-link">
              <span class="lang-en">Home</span>
              <span class="lang-ta">‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ</span>
            </a>
            <a href="/#fleet" class="header-link">
              <span class="lang-en">Fleet</span>
              <span class="lang-ta">‡Æµ‡Ææ‡Æï‡Æ©‡Æô‡Øç‡Æï‡Æ≥‡Øç</span>
            </a>
            <a href="/drivers" class="header-link">
              <span class="lang-en">Drivers</span>
              <span class="lang-ta">‡Æì‡Æü‡Øç‡Æü‡ØÅ‡Æ®‡Æ∞‡Øç‡Æï‡Æ≥‡Øç</span>
            </a>
            
            <!-- Services Dropdown -->
            <div class="relative group">
              <button class="header-link flex items-center gap-1 focus:outline-none py-4">
                <span class="lang-en">Services</span>
                <span class="lang-ta">‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç</span>
                <svg class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
              </button>
              <div class="absolute left-0 top-full w-64 bg-white rounded-xl shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform group-hover:translate-y-0 translate-y-2 border border-gray-100 overflow-hidden">
                <div class="py-2">
                  {services.map((service) => (
                    <a href={service.link} class="block px-4 py-3 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600 border-b border-gray-50 last:border-0">
                      <span class="lang-en font-medium">{service.title}</span>
                      <span class="lang-ta font-medium">{service.title_ta}</span>
                    </a>
                  ))}
                </div>
              </div>
            </div>

            <a href="/calculator" class="header-link">
              <span class="lang-en">Calculator</span>
              <span class="lang-ta">‡Æï‡Ææ‡Æ≤‡Øç‡Æï‡ØÅ‡Æ≤‡Øá‡Æü‡Øç‡Æü‡Æ∞‡Øç</span>
            </a>
          </div>

          <!-- CTA Button (Desktop) -->
          <div class="hidden md:flex items-center gap-4">
            <!-- Language Toggle (Desktop) -->
            <button
              id="lang-toggle-desktop"
              class="flex items-center gap-2 px-3 py-1.5 rounded-full border border-gray-200 hover:border-red-600 transition-colors group"
              aria-label="Switch Language"
            >
              <span
                class="text-sm font-bold text-gray-700 group-hover:text-red-600 lang-en"
                >‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</span
              >
              <span
                class="text-sm font-bold text-gray-700 group-hover:text-red-600 lang-ta"
                >ENG</span
              >
              <i
                class="fa-solid fa-language text-gray-400 group-hover:text-red-600"
              ></i>
            </button>
          </div>

          <!-- Mobile Controls -->
          <div class="flex items-center gap-6 md:hidden">
            <!-- Language Toggle (Mobile) -->
            <button
              id="lang-toggle-mobile"
              class="flex items-center gap-2 px-3 py-1.5 rounded-full border border-red-100 bg-red-50 text-red-700 active:bg-red-100 transition-colors shadow-sm"
              aria-label="Switch Language"
            >
              <span class="text-xs font-bold lang-en">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</span>
              <span class="text-xs font-bold lang-ta">ENG</span>
              <i class="fa-solid fa-language text-red-500 text-sm"></i>
            </button>

            <!-- Mobile Menu Button -->
            <button
              id="mobile-menu-btn"
              class="text-gray-700 focus:outline-none"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Mobile Menu Overlay -->
    <div
      id="mobile-menu-overlay"
      class="fixed inset-0 bg-black/50 z-50 hidden transition-opacity opacity-0"
    >
    </div>

    <!-- Mobile Menu Drawer -->
    <div
      id="mobile-menu-drawer"
      class="fixed top-0 right-0 w-[85%] max-w-sm h-full bg-white z-50 transform translate-x-full transition-transform duration-300 shadow-2xl flex flex-col overflow-y-auto"
    >
      <!-- Header -->
      <div class="flex justify-end p-6">
        <button
          id="close-menu-btn"
          class="text-gray-500 hover:text-red-600 transition-colors focus:outline-none"
        >
          <svg
            class="w-8 h-8"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>

      <!-- Navigation Links -->
      <div class="px-8 py-4 space-y-4 flex-grow">
        <a
          href="/"
          class="block text-base font-medium text-gray-800 hover:text-red-600 border-b border-gray-100 pb-2 transition-colors"
        >
          <span class="lang-en">Home</span>
          <span class="lang-ta">‡ÆÆ‡ØÅ‡Æï‡Æ™‡Øç‡Æ™‡ØÅ</span>
        </a>
        <a
          href="/#fleet"
          class="block text-base font-medium text-gray-800 hover:text-red-600 border-b border-gray-100 pb-2 transition-colors"
        >
          <span class="lang-en">Fleet</span>
          <span class="lang-ta">‡Æµ‡Ææ‡Æï‡Æ©‡Æô‡Øç‡Æï‡Æ≥‡Øç</span>
        </a>
        <a
          href="/drivers"
          class="block text-base font-medium text-gray-800 hover:text-red-600 border-b border-gray-100 pb-2 transition-colors"
        >
          <span class="lang-en">Drivers</span>
          <span class="lang-ta">‡Æì‡Æü‡Øç‡Æü‡ØÅ‡Æ®‡Æ∞‡Øç‡Æï‡Æ≥‡Øç</span>
        </a>
        <a
          href="/calculator"
          class="block text-base font-medium text-gray-800 hover:text-red-600 border-b border-gray-100 pb-2 transition-colors"
        >
          <span class="lang-en">Calculator</span>
          <span class="lang-ta">‡Æï‡Ææ‡Æ≤‡Øç‡Æï‡ØÅ‡Æ≤‡Øá‡Æü‡Øç‡Æü‡Æ∞‡Øç</span>
        </a>

        <!-- Services Accordion -->
        <div class="border-b border-gray-100 pb-2">
          <button
            id="services-menu-toggle"
            class="flex items-center justify-between w-full text-base font-medium text-gray-800 hover:text-red-600 transition-colors focus:outline-none"
          >
            <span class="lang-en">Services</span>
            <span class="lang-ta">‡Æö‡Øá‡Æµ‡Øà‡Æï‡Æ≥‡Øç</span>
            <svg
              id="services-chevron"
              class="w-4 h-4 transform transition-transform duration-200 rotate-180"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"></path>
            </svg>
          </button>
          <div
            id="services-submenu"
            class="mt-2 ml-4 space-y-2 border-l-2 border-gray-100 pl-4"
          >
            <a
              href="/services/category/acting-drivers"
              class="block text-sm text-gray-600 hover:text-red-600"
            >
              <span class="lang-en">Acting Drivers</span>
              <span class="lang-ta">‡ÆÜ‡Æï‡Øç‡Æü‡Æø‡Æô‡Øç ‡Æü‡Æø‡Æ∞‡Øà‡Æµ‡Æ∞‡Øç‡Æï‡Æ≥‡Øç</span>
            </a>
            <a
              href="/services/category/corporate"
              class="block text-sm text-gray-600 hover:text-red-600"
            >
              <span class="lang-en">Corporate Travel</span>
              <span class="lang-ta">‡Æï‡Ææ‡Æ∞‡Øç‡Æ™‡Øç‡Æ™‡Æ∞‡Øá‡Æü‡Øç ‡Æ™‡ÆØ‡Æ£‡ÆÆ‡Øç</span>
            </a>
            <a
              href="/services/category/airport-transfer"
              class="block text-sm text-gray-600 hover:text-red-600"
            >
              <span class="lang-en">Airport Transfer</span>
              <span class="lang-ta">‡Æµ‡Æø‡ÆÆ‡Ææ‡Æ© ‡Æ®‡Æø‡Æ≤‡Øà‡ÆØ ‡Æö‡Æµ‡Ææ‡Æ∞‡Æø</span>
            </a>
            <a
              href="/services/category/temple-tours"
              class="block text-sm text-gray-600 hover:text-red-600"
            >
              <span class="lang-en">Temple Tours</span>
              <span class="lang-ta">‡Æï‡Øã‡Æµ‡Æø‡Æ≤‡Øç ‡Æö‡ØÅ‡Æ±‡Øç‡Æ±‡ØÅ‡Æ≤‡Ææ</span>
            </a>
            <a
              href="/services/category/popular-destinations"
              class="block text-sm text-gray-600 hover:text-red-600"
            >
              <span class="lang-en">Popular Destinations</span>
              <span class="lang-ta">‡Æ™‡Æø‡Æ∞‡Æ™‡Æ≤‡ÆÆ‡Ææ‡Æ© ‡Æá‡Æü‡Æô‡Øç‡Æï‡Æ≥‡Øç</span>
            </a>
          </div>
        </div>

        <!-- Proprietor Card -->
        <div class="pt-6 pb-4 text-center">
          <div
            class="relative mx-auto w-32 h-40 mb-3 rounded-2xl overflow-hidden shadow-lg border-4 border-white"
          >
            <img
              src="/images/mani-perumal.jpg"
              alt="Proprietor"
              class="w-full h-full object-cover"
            />
          </div>
          <h3 class="text-xl font-bold text-gray-900 mb-1">
            Perumal Manikumar
          </h3>
          <p
            class="text-xs tracking-[0.2em] text-gray-500 uppercase font-semibold"
          >
            PROPRIETOR
          </p>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <main>
      <slot />
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col items-center text-center">
          <!-- Logo -->
          <div class="mb-6 bg-white p-2 rounded">
            <img
              src="/images/logo.png"
              alt="Kalidass Travels"
              class="h-12 w-auto"
            />
          </div>

          <!-- GSTIN -->
          <p class="text-sm md:text-base mb-1 font-medium text-gray-400">
            GSTIN : 33COVPM0531D1Z4
          </p>

          <!-- Address -->
          <p class="text-sm md:text-base mb-2 text-gray-400">
            No. 4/220, E88, Ponniamman Kovil Street, Annamalai Nagar,
            Medavakkam, Chennai -600 001.
          </p>

          <!-- Google Maps Link -->
          <a
            href="https://maps.google.com/?q=Kalidass+Travels+Medavakkam+Chennai"
            target="_blank"
            class="text-blue-400 hover:text-blue-300 text-sm mb-8 font-medium"
          >
            View on Google Maps
          </a>

          <!-- Divider -->
          <div class="w-full border-t border-gray-800 mb-8"></div>

          <!-- Copyright -->
          <p class="text-sm text-gray-400">
            &copy; {new Date().getFullYear()} Kalidass Travels | All rights reserved.
          </p>
          <p class="text-sm text-gray-400 mt-1">
            Built by <a
              href="https://wa.me/919952749408?text=Hi%20Saravn,%20I%20saw%20your%20work%20on%20Kalidass%20Travels%20website."
              target="_blank"
              class="font-bold bg-gradient-to-r from-indigo-300 to-purple-300 bg-clip-text text-transparent hover:opacity-80 transition-opacity"
              >Saravn</a
            >
          </p>
        </div>
      </div>

      <!-- Floating Action Buttons -->
      <!-- Android Style Call Button -->
      <a href="tel:+919092303060" class="fixed bottom-6 right-6 z-50 group" aria-label="Call Kalidass Travels">
        <div
          class="absolute inset-0 bg-[#4285F4] rounded-full animate-ping opacity-75"
        >
        </div>
        <div
          class="relative bg-[#4285F4] hover:bg-[#3367D6] text-white p-4 rounded-full shadow-lg transition-all transform group-hover:scale-110 flex items-center justify-center w-16 h-16 border-2 border-white"
        >
          <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
            <path
              d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 00-1.01.24l-1.57 1.97c-2.83-1.49-5.15-3.8-6.62-6.63l1.97-1.57c.23-.29.33-.66.24-1.01-.36-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3.28 3 3.93 3 4.74c0 9.27 7.55 16.82 16.82 16.82.81 0 1.46-.65 1.46-1.19v-3.72c0-.54-.45-.99-.99-.99z"
            ></path>
          </svg>
        </div>
      </a>
    </footer>

    <!-- Mobile Menu Toggle Script -->
    <script>
      const mobileMenuBtn = document.getElementById("mobile-menu-btn");
      const closeMenuBtn = document.getElementById("close-menu-btn");
      const mobileMenuOverlay = document.getElementById("mobile-menu-overlay");
      const mobileMenuDrawer = document.getElementById("mobile-menu-drawer");
      const mobileLinks = mobileMenuDrawer?.querySelectorAll("a");

      function openMenu() {
        if (mobileMenuOverlay && mobileMenuDrawer) {
          mobileMenuOverlay.classList.remove("hidden");
          // small delay to allow display:block to apply before opacity transition
          setTimeout(() => {
            mobileMenuOverlay.classList.remove("opacity-0");
            mobileMenuDrawer.classList.remove("translate-x-full");
          }, 10);
          document.body.style.overflow = "hidden"; // Prevent background scrolling
        }
      }

      function closeMenu() {
        if (mobileMenuOverlay && mobileMenuDrawer) {
          mobileMenuOverlay.classList.add("opacity-0");
          mobileMenuDrawer.classList.add("translate-x-full");

          setTimeout(() => {
            mobileMenuOverlay.classList.add("hidden");
          }, 300); // Match transition duration
          document.body.style.overflow = "";
        }
      }

      mobileMenuBtn?.addEventListener("click", openMenu);
      closeMenuBtn?.addEventListener("click", closeMenu);
      mobileMenuOverlay?.addEventListener("click", closeMenu);

      mobileLinks?.forEach((link) => {
        link.addEventListener("click", closeMenu);
      });

      // Services Menu Toggle
      const servicesToggle = document.getElementById("services-menu-toggle");
      const servicesSubmenu = document.getElementById("services-submenu");
      const servicesChevron = document.getElementById("services-chevron");

      servicesToggle?.addEventListener("click", (e) => {
        e.stopPropagation();
        servicesSubmenu?.classList.toggle("hidden");
        servicesChevron?.classList.toggle("rotate-180");
      });

      // Language Toggle Logic
      const langToggleDesktop = document.getElementById("lang-toggle-desktop");
      const langToggleMobile = document.getElementById("lang-toggle-mobile");

      function toggleLanguage() {
        const isTamil = document.body.classList.toggle("lang-ta");
        localStorage.setItem("preferred-lang", isTamil ? "ta" : "en");
      }

      // Initialize Language
      function initLanguage() {
        const savedLang = localStorage.getItem("preferred-lang");
        if (savedLang === "ta") {
          document.body.classList.add("lang-ta");
        }
      }

      langToggleDesktop?.addEventListener("click", toggleLanguage);
      langToggleMobile?.addEventListener("click", toggleLanguage);

      // Run on load
      initLanguage();
    </script>
  </body>
</html>
